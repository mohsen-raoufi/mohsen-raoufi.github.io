---
import Links from "../Links/Links.astro";
import Title from "../UI/Title.astro";
import { PERSONAL_INFO } from "../../data/personal";
---

<header
  id="home"
  class="relative h-screen flex flex-col items-center justify-center text-center px-4"
>
  <main class="relative z-10 flex flex-col items-center">
    <Title level={1} animate={true}>
      Hi, I'm <span class="text-[#FFDE21]">{PERSONAL_INFO.name}</span>
    </Title>
    <div
      class="text-lg md:text-2xl text-gray-300 mb-8 max-w-2xl font-medium h-8 flex items-center justify-center"
      data-aos="fade-up"
      data-aos-delay="200"
    >
      <span id="typing-text" class="typing-cursor"></span>
    </div>
    <div data-aos="fade-up" data-aos-delay="400">
      <Links />
    </div>
    <a
      href={PERSONAL_INFO.resumeUrl}
      target="_blank"
      class="mt-8 px-8 py-3 bg-gradient-to-r from-[#FFDE21] to-[#dbab19] hover:from-[#dbab19] hover:to-[#FFDE21] text-white font-semibold rounded-full transition-all duration-300 transform hover:scale-105 shadow-[0_0_20px_rgba(255,222,33,0.5)] hover:shadow-[0_0_30px_rgba(255,222,33,0.8)] border border-white/10"
      data-aos="fade-up"
      data-aos-delay="600"
    >
      Resume
    </a>
  </main>
</header>

<script>
  const textElement = document.getElementById("typing-text");
  const titles = [
    "Researcher",
    "Control and Dynamics Expert",
    "System Engineer",
    "Complexity Enthusiast",
    "Roboticist",
    "Developer",
  ];

  let titleIndex = 0;
  let charIndex = 0;
  let isDeleting = false;
  let typeSpeed = 100;

  function type() {
    if (!textElement) return;

    const currentTitle = titles[titleIndex];

    if (isDeleting) {
      textElement.textContent = currentTitle.substring(0, charIndex - 1);
      charIndex--;
      typeSpeed = 50; // Deleting speed
    } else {
      textElement.textContent = currentTitle.substring(0, charIndex + 1);
      charIndex++;
      typeSpeed = 100; // Typing speed
    }

    if (!isDeleting && charIndex === currentTitle.length) {
      // Finished typing full word
      isDeleting = true;
      typeSpeed = 2000; // Pause at end
    } else if (isDeleting && charIndex === 0) {
      // Finished deleting
      isDeleting = false;
      titleIndex = (titleIndex + 1) % titles.length;
      typeSpeed = 500; // Pause before new word
    }

    setTimeout(type, typeSpeed);
  }

  // Start the typing loop
  setTimeout(type, 1000);
</script>
